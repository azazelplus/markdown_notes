# 1.逻辑代数基础

## 1.1概述

* 电路设计方法:
  * 传统设计方法: 自下而上, 人工组装, 调试验证修改. 可靠性差, 设计周期长.
  * 现代设计方法: EDA(Electronics Design Automation)技术. 自上而下, 硬件设计软件化. 借助软件设计平台完成仿真布线, 最后下载到芯片. 
    * 常见软件: xilinx公司的foundation.
    * 设计方法:
      * 原理图;
      * verilog HDL硬件语言;
      * 状态机设计

* 数字集成电路的分类:
  * 按照对输入信号响应规则:
    * 组合逻辑电路
    * 时序逻辑电路
  * 按照电路形式
    * 集成电路
    * 分立电路
  * 按照器件
    * TTL电路
    * CMOS电路
  * 按照规模
    * 小规模SSI(10个左右门)
    * 中规模MSI(10~100)
    * 大规模LSI(~1k)
    * 超大规模VLSI(~1w)
    * 甚大规模ULSI(>10w)


* 集成度: 一块芯片所包含门电路的个数.


* 三极管工作状态: 
  * 模拟电路: 线性放大区
  * 数字电路: 饱和/截止.

* 基本数字电路:
  * 组合逻辑电路;
  * 时序逻辑电路(寄存器,计数器,脉冲发生器,脉冲整形电路)
  * A/D转换器, D/A转换器 (这也是基本模拟电路, ofcourse)

## 1.2进制
只提一下转换常用算法.
![alt text](image.png)
![alt text](image-1.png)
![alt text](image-2.png)
![alt text](image-3.png)
![alt text](image-4.png)

## 1.3码制
`编码`即用数字的特定组合表达特定信息. 比如unicode编码.
  ### 1.3.1 常用二进制到十进制编码(BCD)
![alt text](image-5.png)
![alt text](image-6.png)

  ### 1.3.2 可靠性编码
即缀在某个编码后面用来确保编码传输后顺序仍然正确.
   #### 格雷码
   <a name="grey_code"></a>

![alt text](image-7.png)
格雷码转换规则:
保留二进制数的最高位，作为格雷码的最高位。
接下来的每一位，都等于它与前一位二进制数的异或（XOR）结果。
步骤示例:假设我们要将 `01010 `转换为格雷码：

转换步骤：

* 保留最高位 0。
* 第二位：0 XOR 1 = 1
* 第三位：1 XOR 0 = 1
* 第四位：0 XOR 1 = 1
* 第五位：1 XOR 0 = 1
得到的格雷码：`01111`

另一个直观的转换方法就是:
![alt text](image-125.png)
比如考虑四位二进制码的转换, 参考上图, 比如`1000`转换为格雷码即为`1100`.


   #### 奇偶校验码
![alt text](image-8.png)
![alt text](image-9.png)


## 1.4 逻辑运算
与或非,自行复习

![alt text](image-10.png)
![alt text](image-12.png)
![alt text](image-11.png)

* 芯片选取:
  * a
  * a
  * a
  * a
  * 与非门:74LS00

## 1.5 逻辑代数(布尔代数)

  ### 1.5.1定义

布尔代数是一个具有两个元素 `{0, 1}` 的`半环`，定义
* `加法+` , `or` , $\lor$ , `|`(逻辑或) , `||`(按位或)):
  * 0+0 = 0
  * 0+1 = 1+0 =1
  * 1+1 = 1
* 乘法`*` , 与`and`运算 , $\land$ , `&`(逻辑与) , `&&`按位与:
  * 0*0 = 0
  * 0\*1 = 1\*0 = 0
  * 1*1 = 1
  * 这里的`*`对应verilog中的`&`, 而不是数学上的`×`(对应verilog中的`*`). 在verilog中, 对1bite的变量, `a*b`和`a&b`应该是一个意思.

事实上,`乘法`可以利用`加法`定义出来,两个运算的关系是:
$$
x + y = x * y + 1\\
或者说\\
x * y = x + y + 1
$$

布尔代数的运算满足`加法`和`乘法`的`分配律`、`结合律`和`交换律`，同时存在`加法的单位元0`和`乘法的单位元1`， **但是注意不存在加法逆元和乘法逆元，无法定义减法和除法。**

在这个域的基础上定义了一个运算为`取反` $\urcorner$ , $\urcorner1 := \overline{1} := 0$ , $\urcorner0 := \overline{0} := 1$ ;

#### 1.5.1. 异或XOR

定义运算`异或`$\oplus$

$$A\oplus B := \overline{A}B+A\overline{B}$$

异或符合`交换律`,`结合律`.(证略)

有:
* **和与的分配律**: $A*(B\oplus C)=(AB)\oplus(BC)$
* **和常量有关的运算**:
   $\\ 
   A\oplus1=\overline{A}\\ A\oplus0=A\\  
   A\oplus A=0\\
   A\oplus\overline{A}=0\\
   真值表易证.$
* **因果互换律**:
   $\\若A\oplus B=C, 则有\\
   A\oplus C=B\\
   B\oplus C=A$

* **连续异或为奇校验**
A^B^C^...的结果为: 如果有奇数个1, 结果为1, 否则为0.

#### 1.5.1. 同或(异或非)XNOR

定义运算`同或`$\odot$

$A\odot B\\ 
:= \overline{\overline{A}B+A\overline{B}}\\
:=\overline{A}\,\overline{B}+AB(见习题1.5.2.5)\\
$
=~((a&b)|((~a)&(~b)))`代码表示`


同或符合`交换律`.`结合律`. (证略)
显然`异或`和`同或`的关系为互为取反.

在此基础上可以推导出一些常用的结果.
* **同一律**
  
$$
x + x = x
\\
x*x = x
$$

* **互补律**

$$
x + \neg x = 1
\\
x * \neg x = 0
$$

* **德摩根律**
$$
\overline{x*y}=\overline{x}+\overline{y}
\\
\overline{x+y}=\overline{x}*\overline{y}
$$
可用真值表证明.


* **吸收律**

$$
1+x=x
$$
易证, 在与运算中只要有一个1, 结果就一定为1.




  ### 1.5.2 逻辑代数例题和常见定理

#### 1.5.2.1 证明$\quad (x+y)(x+z) = x + yz.$

证明:
$$

\text{LHS} = x^2 + xy + xz + yz \\
= x + xy + xz + yz \\
= x(1+y+z) + yz \\
= \text{(吸收律)} \quad x + yz
$$

#### 1.5.2.2 证明冗余律: $xy + \neg xz + yz = xy + \neg xz$ 

证明:
$$
LHS=xy+\neg xz+yz(x+\neg x) \qquad 同一律\\
=xy+\neg xz+xyz+\neg xyz\\
=xy(1+z)+\neg xz(1+y)\\
=xy+\neg xz \qquad 吸收律\\
$$

*欲使用冗余律化简, 检查成对的x和¬x.*

#### 1.5.2.3 证明冗余律推广:$xy + \neg xz + yzm = xy + \neg xz$

证明:
$$
LHS=(xy+\neg xz)+yzm\\
= (xy+ \neg xz+yz)+yzm \qquad 冗余律\\
= xy+\neg xz+yz(1+m)\\
= xy+\neg xz+yz \qquad 吸收律\\
= xy+\neg xz \qquad 冗余律\\
$$

#### 1.5.2.4 证明吸收律2: $x+\neg xy=x+y$

证明:
$$
LHS=(x)+\neg xy\\
=(x+xy+x\neg x)+\neg xy \  逆吸收律\\
=x^2+xy+x\neg x+\neg xy\\
=(x+y)(x+\neg x)\\
=x+y
$$

#### 1.5.2.5 证明同或拆解式: 
$\overline{A\overline{B}+\overline{A}B}=\overline{A} \,\overline{B}+AB$

事实上 $\overline{A\overline{B}+\overline{A}B}$即为 **同或** $\odot$,

=$A\odot B$

或者说是**亦或(⊕)非**

=$\overline{A\oplus B}$



*证明*:
$$
LHS=\overline{A\overline{B}}*\overline{\overline{A}B} \qquad 德摩根律\\
=(\overline{A}+\overline{\overline{B}})
*
(\overline{\overline{A}}+\overline{B})  \qquad 德摩根律\\
=(\overline{A}+B)(A+\overline{B})\\
=A\overline{A}
+\overline{A} \,\overline{B}
+BA
+B\overline{B}\\
=\overline{A} \,\overline{B}+AB \quad 同一律
$$


  ### 1.5.3 反演规则和对偶规则

![alt text](image-13.png)
![alt text](image-14.png)
显然反演规则其实就是摩根律.

#### 1.5.3.2对偶规则

对于任何一个逻辑表达式F，如果将式中所有的“·”换成“+”，“+”换成“·”，“0”换成“1”，“1”换成“0”，有**F=F'**，表达式F'称为F的**对偶式**。
![alt text](image-15.png)
![alt text](image-16.png)
* 对偶规则的证明：
  



## 1.6逻辑函数的表示方法和转换

  ### 1.6.1 先看一个例子
栗子:
![alt text](image-17.png)
![alt text](image-18.png)
![alt text](image-19.png)

  ### 1.6.2 逻辑函数的表示

   #### 1.6.2.1 逻辑表达式

![alt text](image-20.png)
![alt text](image-21.png)
显然,他们可以通过摩根定律相互转换.
![alt text](image-22.png)


* 与-或表达式最常见, 如常用的**标准与或表达式**.
* 与非-或非表达式也很常见, 因为这样写可以节省芯片门数量.

##### 最小项和最小项(正交)表达式(标准与或表达式)

![alt text](image-23.png)
![alt text](image-24.png)
![alt text](image-25.png)
![alt text](image-26.png)
![alt text](image-27.png)


* 真值表到逻辑式的转换: 利用**最小项表达式**:
![alt text](image-29.png)



   #### 1.6.2.2 逻辑图

![alt text](image-31.png)

   #### 1.6.2.3 波形图

![alt text](image-32.png)
![alt text](image-33.png)

  ### 1.6.3 逻辑函数的化简

   #### 1.6.3.1 化简概述

![alt text](image-34.png)
![alt text](image-35.png)

不同形式的逻辑式有不同的最简式.一般先求**最简与或式**, 然后变换得到所需的最简式.

* **最简与或式** 要求:
  * **乘积项个数**最少,使与门个数最少.
  * **乘积项变量**最少,使与门输入端最少.

* **最简与非-与非式** 要求:
  *  **非号个数**最少, 使与非门个数最少.
  *  **每个非号中变量**最少, 使与门最少.



   #### 1.6.3.2 公式化简法
就是直接在逻辑表达式上进行化简. 缺点是直观性差, 不能保证看出来是最简的.

> 能合并(加法分配律)的合并, 
> 能使用吸收律($1+x=x, x+\neg xy=x+y$)/冗余律($xy + \neg xz + yzm = xy + \neg xz$)就用. 
> 可尝试使用: $*(x+\neg x)$, 使用德摩根率拆解或合并,;
> 不能合或者拆, 就使用冗余律多出来一个冗余项试一试 .
> 
![alt text](image-36.png)
![alt text](image-37.png)
![alt text](image-38.png)
![alt text](image-39.png)
 
 
   ##### 1.6.3.3 卡诺图化简法

![alt text](image-54.png)
![alt text](image-55.png)
用卡诺图化简得到的结果一定是最简的.

   ###### 1.空白卡诺图的画法
空白卡诺图就是一个表格, 每个格子对应一个最小项, 且相邻格子要求只有一个变量互为反变量.

* 相邻最小项
![alt text](image-40.png)

* 卡诺图组成
![alt text](image-41.png)

![alt text](image-43.png)
* 有些书本纵向画三变量卡诺图.
![alt text](image-42.png)
![alt text](image-44.png)

一个空白卡诺图卡诺图的目的就是在表中填入n变量的$2^n$个最小项, 使**相邻项**满足**相邻性**(只有一个变量互为反变量,其他相同)
![alt text](image-45.png)
![alt text](image-46.png)




   ###### 2.把一个具体的逻辑函数填入到卡诺图中


![alt text](image-47.png)
![alt text](image-48.png)

![alt text](image-49.png)
* 这里找交集实际上就和你×个$(C+\overline{C})(D+\overline{D})$化成标准最小式是一样的.
![alt text](image-50.png)
![alt text](image-51.png)
![alt text](image-52.png)
![alt text](image-53.png)

   ###### 3. 用填好的卡诺图化简逻辑函数 

![alt text](image-58.png)

* 化简两个1
![alt text](image-57.png)

* 化简四个1
![alt text](image-56.png)

* 化简八个1
![alt text](image-59.png)

* 实例:
![alt text](image-60.png)
![alt text](image-61.png)
![alt text](image-62.png)
![alt text](image-63.png)
![alt text](image-64.png)


变量和反变量的卡诺图，`0`和`1`互换. 所以,如果卡诺图中全是1, 0很少, 可以先求出来反变量, 把0画出卡诺圈.

![alt text](image-65.png)

  ### 1.6.4 有约束逻辑变量

![alt text](image-67.png)
![alt text](image-68.png)
![alt text](image-69.png)
 
* 有约束逻辑变量的化简

![alt text](image-70.png)





# 2.门电路

## 2.0 概述, 以及模电复习

![gaishu](image-71.png)

---
---
---
---

* 补充思路1: **BJT导通的条件判断**:
  * 1.最基础的: 发射结正偏集电结反偏.
    * BJT的工作状态:  (导通)
      * 放大: 发射结导通, 集电结截止
      * 饱和: 发射结和集电结都导通.
      * 截止: 发射结和集电结都截止.
      * 倒置: 发射结截止, 集电结导通.

  * 2.看ib. (即从输出特性ic-uce曲线出发) 如果ib足够大, 那麽此时管子一定导通了.
      ![BJT输出特性曲线](image-79.png)

* 补充思路2: **判断二极管导通顺序**
最简单的, 初始时管压降大的先导通.
如果某条支路串了两个二极管, 那麽它们初始时假设**平均分压**.


* 补充思路3: **uce或者说ubc的大小是多少?**

BJT的集电结电压大小取决于工作状态. 因为导通情况下, uce是一个变量. 但是在饱和区, uce有一个所谓的典型值uces, 它约等于**0.1v--0.3v**.

这在输出特性曲线上很容易理解:
![alt text](image-83.png)


* 补充思路4: **用数电思维来看三极管**
即, 数电中的BJT一般所谓`导通`就是`深度饱和`, 或者`断开`就是`截止`. 

前者可以看成ce极几乎拉平(uce≈0.1v), 后者可以看成bce三个端子都断开.


---
---
---
---





## 2.2 基本逻辑门电路(与或非)

![andgate](image-73.png)
![orgate](image-74.png)
![notgate](image-72.png)


## 2.3 TTL集成门电路
`Transistor-Transistor-Logic`
输入端和输出端都用三极管的逻辑门电路.
即MOS管互补对称构成的逻辑门电路.
本章主要聚焦于`TTL与非门`及其变形(`TSL`).


  ### 2.3.1 TTL与非门

   #### 1.结构图：
![TTL and-or gate](image-75.png)
TTL与非门的结构可以分为三部分来分析。
* **输入级**
  ![输入级](image-76.png)
  ![alt text](image-77.png)

* **中间级**和**输出级**
![alt text](image-78.png)
T2管起到**倒相**作用: 其C极和E极输出相反的信号.

   #### 2.工作原理
* 假设导通时,BJT有发射结管压降Ube=0.7V, Uce=0.3V, **深度饱和**时(基极电流ib有够大, 已经比集电极电流ic大好多)Uces不再是0.3V, 而是uces=0.1V. 同时忽略D1, D2(他们只是保护作用)

分析:

##### Ⅰ当输入端AB其中至少一个为低电平0.3v(这一共包含三种情况)时:
![情况Ⅰ](image-81.png)

我们假设T1(任何一个)导通, 
AB端电平更低的那个发射结优先导通,
ube=0.7v, **钳位效应得到T1管ub≡0.3v+0.7v=1v.** 也就是说这三种情况是相同的. 

例如, 如果ua=0.3v, ub=3.6v, A端发射结导通后钳位效应使得b端发射结截止, 但没关系, 有一个导通, 即可视为导通了.

继续分析. 可得R1两端压降4V, 产生T1管的ib=1mA, 这是很大的电流, T1管此时深度饱和导通, uces=0.1v, 从而得到T2管的ub2=0.4v.

由于T2管子此时即使没有其他电流分压, ube也只=ub2=0.4v < 0.7v, 所以T2管此时无法导通. 或者说, T2发射结想导通, 回路路线:
   * 要么经过R3到GND(这条路需要T2的ub至少(R3不分压)为0.7v). 
   * 要么经过T4发射结到GND(这条路需要T2的ub至少为0.7+0.7v)
所以现在T2的ub只有0.4v, 无法导通.


由于T4是T2发射极控制的(因为T4的导通条件是, 要求ube>0.7v, 而T4的ube即为T2的ue), 现在**T2截止, 即bce三端都断开了**, ue低电压, 所以T4也截止了.


再往右看. 该电路中**R2被设计得非常小, 分压可以忽略.** 从而T3的ub ≈ VCC = 5V.

此时T3显然满足
  * 发射结正偏(可以假设输出端接个负载接地, 还没通电流时无压降, T4的ue=0), 
  * 集电结反偏(ubc≈0-)
所以T3导通.

于是得到输出端电压为UY≈5v-0.7v(T3发射结)-0.7v(二极管压降)=3.6v , 即输出高电平1.

##### Ⅱ 当输入端AB均为3. :

此时AB端可以看成一个端子, 然后简化为一个3.6v源.

和Ⅰ不同的是, 此时T1发射结初始时两端电压为5v-3.6v=1.4v, 不再是优先导通的了:
(实际上我们忽略了Ⅰ中判断T步骤)

先分析初始时导通顺序.考虑两条支路:
  * VCC-R1-AB
    * T1两端压降为1.4v.
  * VCC-R1-T2发射结-R3=GND
    * T2两端压降为5v.<br>
  ![alt text](image-80.png)

于是**T2发射结先导通**, 并**钳位**ube=0.7v, 

此瞬时, T3发射结两端电压为5-0.7=4.3v, 仍然大于T1管子, 所以**按顺序第二个导通的是T3**.  

T3也导通后, 钳位ube=0.7v, 于是T2,T3一起导通, 并且**把ub2电压钳位为0.7+0.7=1.4v**

![alt text](image-85.png)

接下来, T1管子的发射结和集电结争夺顺序, 集电结两端电压更大(5v-1.4v)>1.4v, 于是接下来T1集电结导通, 并**钳位ucb=0.7v**.

此时查看`GND-T3发射结-T2发射结-T1集电结`这条支路, 可知它们三个二极管导通并将ub1钳位为0.7*3=2.1v.

于是T1发射结现在只有ube=2.1-3.4=-1.3v, 无法导通了--**T1发射结反偏, 集电极正偏, 进入了倒置放大状态.**.

事实电路设计上, 此时查看`GND-T3发射结-T2发射结-T1集电结`这条支路, VCC给T2和T3足够的电压, 两个管子均进入**深度饱和**.

最后查看T3管发射结和集电结, 可发现都截止, 

* T3管最后分析, 因为**它必须需经T4才能接地形成回路**, 需要先分析T4才能分析T3.

由于T4饱和, 立即得到uce大概为0.3v, 即**输出低电平.**

![alt text](image-86.png)

此时T4的集电极电流只能由外电路提供, 故称为**灌电流(拉电流)**.

  #### *2.3.1.4 TTL与非门的电气特性
![TTL与非门输入伏安特性](image-87.png)
中间是等效电路, 其中BE2, BE4即为T2, T4管的发射结等效二极管.

  ### 2.3.3 OC门(open collector)  集电极开路(与非)门
   #### 2.3.3.1 OC门电路结构
---
---
---
---
**引子:   线与**
指TTL器件的输出直接相连, 实现`与`逻辑.
普通TTL器件不能直接实现`线与`, 因为:

**例如TTL与非门:**

输出方式为`推挽输出`
![推挽输出](image-100.png)
T1和T2交替工作. 

如果直接把两个ttl与非门的输入连接:
![连接两个推挽输出](image-101.png)
* 若`G1`输出高电平, `G2`输出低电平:
  * 必然`T1`导通, 把G1输出推到VCC那边的高电压.
  * 必然`T4`导通, 把G2输出拉到GND这边的低电压.
  * 连接后, 将会产生一个从Y1到Y2的电流:
  * ![两个推挽输出之间产生大电流](image-102.png)
  * 由于`T`, `T2`处于深度饱和状态, 产生的电流很大, 可能把这两个器件烧坏.

* 若`G2`输出高电平, `G1`输出低电平, 也会产生大电流.
---
---
---
---

为了解决这个问题,  我们尝试把`推挽输出结构`上面那个管子摘掉,  即得到`集电极开路结构`:

![集电极开路结构](image-103.png)

此时, 如果T2管子导通, 则把输出拉到低电平; 如果T2截止, 导致输出**悬空**, 即`高阻态`.

那麽, 失去了上拉电平的`T1`, 如何能在`T2`截止时得到高电平输出呢?

可以再接一个外电源VCC, 通过上拉电阻实现:

![集电极开路结构-带外电源](image-104.png)
  
这样, `T2`导通时, 得到低电平输出; `T2截止时,`  得到高电平输出.


删去一个管子的ttl与非门, 即为OC门:


![OC门](image-106.png)

它的分析和ttl思想一样, 略.

* 注意: OC门符号是不包括外电源的...

我们现在得到了新的与非门--`OC`门. 它可以实现`线与`功能了:

![OC门_线与](image-107.png)

![OC门线与的局部等效电路](image-108.png)




分析: 例如`G1`输出`1`(T14管截止断开), `G2`输出`0`(T24管导通)时,

V'CC延RC-T24-GND形成回路(有了RC, 电流不会过大), 得到高电平Y=1.


* OC门逻辑表达式:

  ![OC门逻辑表达式](image-109.png)



   #### OC门的应用

* 首先可以用来实现`线与`.
* **驱动发光二极管**:
  * OC门有一个输出端外接电源, 用**灌电流**(sink current, 很大)输出.
    * ![OC门灌电流输出](image-110.png)
  * 而普通TTL与非门只有自身一个外接电源, 用拉电流(source current, 很小)输出.
    * ![普通TTL与非门拉电流输出](image-111.png)
  * OC门这个优点使它的输出电流足以驱动发光二极管, 实现指示灯效果:
    * 输出低电平时产生回路V'CC-LED-T2, 指示灯亮.
    * 输出高电平时为断路, LED无电流, 高电平即为V'CC的电压.

* **实现电平转换**:
原理同上, 使用高电压的V'CC, 利用OC门强力的灌电流来驱动其他门电路. 

如果是普通TTL与非门, 输出最高也无法超过VCC=5V.




  ### 2.3.2 TSL  门(three-state logic) TTL三态门

   #### 2.3.2.1 TSL电路分析
   * 事实上很多种门都有其三态形式, 大多是在原电路上添加一部分.
   * 三态门有两种:`使能端低电平有效`和`使能端高电平有效`, 我们取低电平有效就是底下有一个非门, 高电平有效的情况就是有俩非门(等效于没有非门).
   * EN信号即为使能(enable)信号. $\overline{EN}$即表示需要输入0才能使EN=1, 即低电平有效.  使能信号的作用是, 当其为`0`时, 使输出为第三态:`高阻态`.
   * `∇`表示`三态`, 和普通的与非门区别.
   * 可以看出, TSL门在TTL与非门的基础上添加了一个使能信号电路(红色部分).
  ![TSL(使能高电平)结构](image-89.png)



##### Ⅰ使能信号为0(低电平)
<br><br>

![TSL结构2](image-90.png)

当使能信号为0(Q点为0.3v低电平)时, 无论AB输入, 都使T1**深度饱和导通**.
**(事实上, T1管子本身就是一个`与`逻辑.)**

T1的导通, 把T2基极拉到低电平(≈直接连接EN), 于是**T2截止**.

再看下方的使能信号电路:

T5因为经过电阻连着VCC, 故**T5导通**.

(*数电默认发射结导通就是导通, 而且没有其他例外的话就是饱和导通 (集电结也导通) , ce可以看为近乎短路*)

T5的导通, 使C极也被拉到低电平(uce≈0), 于是**T6截止**.

T7同T4, 因为经过电阻连着VCC, 故**T7导通**.

T7的导通. 拉低了T3基极电压, 导致**T3断开**.

再看最后剩下的T4. 因为T2, T3都断开, T4已经悬空(即三端都断开), **T4断开**.

现在因为T3,T4断开, **输出端是悬空的**. 这种状态称为**高阻态**, 既为`Y=Z`. 即可以认为输出端和地之间有极大的电阻, 直接测量输出端的电压得到`0`.
<br><br>

##### Ⅱ 使能信号为1(高电平)

此时(我不知道为什麽,可能是器件参数人为匹配好了吧) **T5处于倒置**, 从而集电结导通.

同时(器件参数人为匹配好保证), T6基极此时电压还足够0.7v, **T6导通**.

T6的导通把T7基极拉到低电位, 从而**T7截止**.

于是此时下方的使能电路不会影响上方了, **电路退化为TTL与非门**.
<br><br>


   #### 2.3.2.2 TSL门的应用 

<br><br>

##### 1.多路开关

![TSL多路开关](image-91.png)

* 此处与非门的符号不是`&`而是`1`, 意思是只使用与门的一个输入.
* 使能信号`EN`一个接`G1`, 一个取反后接`G2`, 作用就是保证两个与非门只有一个在工作, 另一个在`高阻态`, 即断开.
* 于是, 控制`EN`, 就可以得到$\overline{A_1}$或$\overline{A_2}$输出, 实现一个两路开关效果.
* 例如输出$\overline{A_1}$的情况:
  ![TSL多路开关-情况1](image-92.png)


<br><br>

##### 2.信号双向传输


![TSL双向传输](image-94.png)
即, 两个TSL与非门,
  * 使用一个使能信号控制(红色电路).
  * G1输入接A1, 输出接A2.
  * G2输入接A2, 输出接A1.

控制`EN`, 使G1工作, G2高阻态(输出断开了, 从而输入也没用) 则有等效电路图:
  * ![双向传输case1](image-95.png)
  * 退化一个简单的非门, 也就是A1向A2传输信号.
  
反之亦然, 从而实现双向传输信号电路功能.

* 注意: **data bus在任何时刻, 只允许一个三态门工作, 其他为高阻态(输出断开).**

<br><br>

##### 3. 构成数据总线(DB, data bus)

![TSL数据总线](image-96.png)

其实就是个多路开关而已. n个`EN`控制这些门的开关.

<br><br>
   
   #### 2.3.2.3 TTL集成芯片


  ### 2.3.4 TTL芯片

   #### 2.3.4.1 TTL芯片分类
* 国内TTL集成芯片有两个系列, `74`(民用)和`54`(军用). 这里我们主要讨论`74`系列.
![alt text](image-97.png)

* `74`系列TTL芯片分类:
    ![74系列TTL芯片](image-98.png)
   * 其中`H`即`highspeed`, `S`即`Schottky`, `A`即`advanced`, `L`即`low`.
   * 复习: 肖特基二极管是一个金属-半导体异质结. 导通压降比硅二极管低(约为0.4v), 响应迅速, 且没有电容效应.

  ![alt text](image-99.png)
  `CT`意为国家标准TTL.
  最后两位数字表示具体型号, 如`CT74ALS00`即为`国家标准-74系列-TTL-先进-低功耗-肖特基-与非门`.
    * `00`表示`与非门`
    * `04`表示`非门`
    * `08`表示`与门`
    * `32`表示`或门`
    * `86`表示`异或门`


   #### 2.3.4.2 TTL芯片使用注意事项:
  * `双列直插`芯片: 即两排对称的需要过孔的引脚, 需要在另一侧焊接. 实验室那些便宜的塑料芯片.
  * `表贴式`芯片: 四方形, 一半多管脚, 在单面即可焊接, 如电脑的CPU.
  * 输出端连接:
    * 普通TTL输出端**不能直接并联**(线与), 需要用OC门, 不然一个0一个1信号产生大电流会烧坏管子!
    * TSL可以并联输出, 但是必须保证使用时同时只有一个工作, 其他均为`高阻态`.
    * 输出端**不能直接接`电源`/`GND`**, 不然会产生大电流烧坏芯片.
  * 与(非)门闲置输入端处理:
    * 接入`逻辑1`.
      * 例如(通过电阻)直接接入`VCC`
      * ![多余端接VCC](image-112.png)
    * 可以`悬空`
      * ![多余端悬空](image-113.png)
    * 和有用端连在一起.
      * ![和有用端连在一起](image-114.png)
        * 用得少, 需要考虑电流分流后还能不能保证信号.
  * 或(非)门闲置输入端处理:
    * 接入`逻辑0`.
      * 例如(通过电阻)直接接入`GND`

  * 电源和焊接:
    * ![电源和焊接](image-115.png)


## 2.4 CMOS集成门电路

* `TTL门电路`相对`COMS集成门电路`的缺点, 其实就是`BJT`相比`MOSFET`的缺点.
  * 缺点: 功耗高, 器件电路复杂. 工作电压苛刻. 逻辑摆幅不够大. 抗干扰能力低. 扇出能力(驱动其他门电路能力)小.
  * 优点: 不易被击穿.


  ### 2.4.1 CMOS反相器





  ### 2.4.3 OD门(open drain) 漏极开路(与非)门

  * 它实现和`OC门`相同的功能, 只是性能上有差异.







# 3.组合逻辑电路


包含加法器, 编码器, 译码器, 分配器, 选择器

* 组合电路和时序电路的区别:
  ![alt text](image-116.png) 
  即有没有 `触发器`. 组合电路没有`触发器`, 由门电路构成. 只有输入到输出的通路, 没有`反馈电路`.

   
## 3.1 组合逻辑电路的分析

  ### 例1 一致判断电路
  ![例1(1)](image-117.png)
  ![例1(2)](image-118.png)

  ### 例2 奇校验电路
  ![例2(1)](image-119.png)
  ![例2(2)](image-120.png)
  ![例2(3)](image-121.png)

  ### 例3 设计投票电路(2/3通过)
  ![alt text](image-122.png)
  ![alt text](image-123.png)
  ![alt text](image-124.png)

  ### 例4 设计码制变换电路
[跳转到格雷码介绍](#grey_code)

## 3.2 加法器

  ### 3.2.1半加器

接受两个`0`或`1`的输入`A`,`B`, 输出它们相加的本位和`S`和进位数`C`. 例如`1+1`得到本位上为`0`, 进位`1`.

显然有**逻辑表达式**:
$$
S=A\oplus B=A\overline{B}+B\overline{A}\\
C=AB
$$
**逻辑电路:**
![alt text](image-126.png)

**真值表**:
| 输入1 | 输入2 | 输出1 | 输出2 |
|:----:|:----:|:----:|:----:|
| **A** | **B** | **S** | **C** |
| 0    | 0    | 0    | 0    |
| 0    | 1    | 1    | 0    |
| 1    | 0    | 1    | 0    |
| 1    | 1    | 0    | 1    |

  ### 3.2.2全加器FA(full adder)

输入为`A` ,`B` , `CI`(carry in) , 输出为`S`(sum), `CO`(carry out).

![全加器](image-127.png)

显然, 使用`n`块`全加器`即可搭建`n`位加法器.

![n位加法器](image-129.png)

  ### 3.2.3 利用全加器实现`二进制乘法`(二位为例)






  ### *3.2.4集成全加器芯片
![双全加器](image-128.png)























# 4.触发器 Flip Flop
是一个具有记忆功能的器件.








































































































# 5.时序逻辑电路
和组合逻辑电路的区别就是有没有触发器, 和时间有关. 多出来的部件有 计数器, 寄存器.

时序, 即`CP`(cyclic prefix,循环前缀)

## 5. 触发器

定义: 
  * 要求有两个稳定的状态(`0`,`1`), 来表示存储内容.
  * 能够`接收`,`保存`,`输出`信号. 

分类:
* 按照电路结构
  * 基本
  * 同步
  * 边沿
* 按照逻辑功能
  * RS
  * JK
  * D
  * T(T')

  ### 基本RS触发器(基本触发器)
实际上就是来自`双稳态电路`.




现态和次态:
* `现态`即触发器接收输入信号之前的01状态
* `次态`即触发器接收输入信号之后的01状态.











# 6.脉冲产生与整形电路



# 7.杂项

## 7.1 `74`、`74HC`、 `74LS` 系列芯片资料

* 单词解释:
  * (1) QUAD(ruplet): 4 组←
  * (2) TRIPLE: 3组←
  * (3) HEX(agon): 6角←


| **Part Number**                  | **Description (English)**                | **Description (Chinese)**       |
|----------------------------------|-------------------------------------------|---------------------------------|
| 7400 QUAD 2-INPUT NAND GATES     | Quad 2-input NAND gates                   | 与非门                          |
| 7401 QUAD 2-INPUT NAND GATES OC  | Quad 2-input NAND gates with open collector | 与非门                          |
| 7402 QUAD 2-INPUT NOR GATES      | Quad 2-input NOR gates                    | 或非门                          |
| 7403 QUAD 2-INPUT NAND GATES     | Quad 2-input NAND gates                   | 与非门                          |
| 7404 HEX INVERTING GATES         | Hex inverting gates                       | 反向器                          |
| 7406 HEX INVERTING GATES HV      | Hex inverting gates, high voltage         | 高输出反向器                    |
| 7408 QUAD 2-INPUT AND GATES      | Quad 2-input AND gates                    | 与门                            |
| 7409 QUAD 2-INPUT AND GATES OC   | Quad 2-input AND gates with open collector | 与门                            |
| 7410 TRIPLE 3-INPUT NAND GATES   | Triple 3-input NAND gates                 | 与非门                          |
| 7411 TRIPLE 3-INPUT AND GATES    | Triple 3-input AND gates                  | 与门                            |
| 74121 ONE-SHOT WITH CLEAR        | One-shot with clear                       | 单稳态                          |
| 74132 SCHMITT TRIGGER NAND GATES | Schmitt trigger NAND gates                | 触发器与非门                    |
| 7414 SCHMITT TRIGGER INVERTERS   | Schmitt trigger inverters                 | 触发器反向器                    |
| 74153 4-LINE TO 1 LINE SELECTOR  | 4-line to 1-line selector                 | 四选一                          |
| 74155 2-LINE TO 4-LINE DECODER   | 2-line to 4-line decoder                  | 译码器                          |
| 74180 PARITY GENERATOR/CHECKER   | Parity generator/checker                  | 奇偶发生检验                    |
| 74191 4-BIT BINARY COUNTER UP/DOWN | 4-bit binary up/down counter             | 计数器                          |
| 7420 DUAL 4-INPUT NAND GATES     | Dual 4-input NAND gates                   | 双四输入与非门                  |
| 7426 QUAD 2-INPUT NAND GATES     | Quad 2-input NAND gates                   | 与非门                          |














## 